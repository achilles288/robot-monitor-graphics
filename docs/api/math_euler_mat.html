<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robot Monitor Graphics: Euler And Matrix</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<script type="text/javascript" src="../pages/api/header.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_header.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Robot Monitor Graphics
   </div>
   <div id="projectbrief">Simple and quick 2D/3D graphics engine for simulation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('math_euler_mat.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Euler And Matrix </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section user"><dt></dt><dd>There are many forms to represent orientation in 3D space. Matrices, Euler angles and quaternions. In this API, most computations are done with matrices. Euler Angles is simply a set of roll, pitch and yaw. It represents 3 successive rotations in 3 axes and the order may be different. Compared with other representations, this is much easier to visualize and less difficult to learn for most people. Many 3D modeling softwares implement this representation.</dd></dl>
<div class="image">
<img src="airplane.png" alt="airplane.png"/>
</div>
<dl class="section user"><dt></dt><dd>Matrices are mainly used in the back-end and Euler angles in the front-end. So, it is necessary that the conversions between these two forms is to be researched.</dd></dl>
<dl class="section user"><dt></dt><dd>For the sequence of rotations, the order is taken as yaw, pitch and roll.</dd></dl>
<p class="formulaDsp">
\[ R = R_z(\phi)R_y(\theta)R_x(\psi) \]
</p>
<p class="formulaDsp">
\[ R = \begin{pmatrix} \cos\theta \cos\phi &amp; \sin\psi\sin\theta\cos\phi-\cos\psi\sin\phi &amp; \cos\psi\sin\theta\sin\phi+\sin\psi\sin\phi \\ \cos\theta\sin\phi &amp; \sin\psi\sin\theta\sin\phi-\cos\psi\sin\phi &amp; \cos\psi\sin\theta\sin\phi-\sin\psi\cos\phi \\ -\sin\theta &amp; \sin\psi\cos\theta &amp; \cos\psi\cos\theta \end{pmatrix} \]
</p>
<p>  
<style>
#MathJax-Span-23 {
  font-size: 14px;
  line-height: 22px;
}
</style>
</p>
<h1>Finding \(\boldsymbol{\theta}\)</h1>
<dl class="section user"><dt></dt><dd>Starting with \(\boldsymbol{R_{20}}\), it is found that</dd></dl>
<p class="formulaDsp">
\[ R_{20} = -\sin\theta \]
</p>
 <p class="formulaDsp">
\[ \theta = \sin^{-1}(-R_{20}) \]
</p>
<h1>Finding \(\boldsymbol{\psi}\)</h1>
<dl class="section user"><dt></dt><dd>For \(\boldsymbol{\cos\theta \ne 0}\),</dd></dl>
<p class="formulaDsp">
\[ {R_{11}\over R_{22}}={\sin\psi\cos\theta \over \cos\psi\cos\theta} \]
</p>
 <p class="formulaDsp">
\[ \psi = \tan^{-1}({R_{21} \over R_{22}}) \]
</p>
<dl class="section user"><dt></dt><dd>To compute the above equation using \(\mathbf{atan2}\) function, it is observed that the sign of each parameter is important for determining the quadrant. So, to obtain the correct quadrant of \(\boldsymbol{\psi}\), the sign affected by \(\boldsymbol{\cos\theta}\) is removed as follow.</dd></dl>
<p class="formulaDsp">
\[ \psi = \mathrm{atan2}({R_{21} \over \cos\theta},{R_{22} \over \cos\theta}) \]
</p>
<h1>Finding \(\boldsymbol{\phi}\)</h1>
<dl class="section user"><dt></dt><dd>With similar approach in previous step, at \(\boldsymbol{R_{00}}\) and \(\boldsymbol{R_{10}}\),</dd></dl>
<p class="formulaDsp">
\[ \phi = \mathrm{atan2}({R_{10} \over \cos\theta},{R_{00} \over \cos\theta}) \]
</p>
<h1>What If Gimbal Lock?</h1>
<dl class="section user"><dt></dt><dd>Gimbal Lock is the state where the Euler rotations lose one degree of freedom. When the second order rotation takes a 90 degree rotation, the third rotation axis becomes identical to the previous first rotation axis.</dd></dl>
<dl class="section user"><dt></dt><dd>Since \(\boldsymbol{\cos\theta = 0}\), the above equations don't work and another approach is to be observed.</dd></dl>
<h2>If \(\boldsymbol{\theta = {\pi \over 2}}\)</h2>
<dl class="section user"><dt></dt><dd>Substituting \(\boldsymbol{\sin\theta = 1}\) in \(\boldsymbol{R_{01}}\), \(\boldsymbol{R_{02}}\) and applying angle sum and difference trigonometric identity,</dd></dl>
<p class="formulaDsp">
\[ R_{01} = \sin\psi\cos\phi-\cos\psi\sin\phi = -\sin(\phi-\psi) \]
</p>
 <p class="formulaDsp">
\[ R_{02} = \cos\psi\cos\phi+\sin\psi\sin\phi = \cos(\phi-\psi) \]
</p>
<dl class="section user"><dt></dt><dd>In Gimbal Lock, both yaw and roll are rotating at the same axis and one of them can be any value. Here, \(\boldsymbol{\psi}\) is taken zero.</dd></dl>
<p class="formulaDsp">
\[ \phi = \mathrm{atan2}(-R_{01}, R_{02}) \]
</p>
<h2>If \(\boldsymbol{\theta = -{\pi \over 2}}\)</h2>
<dl class="section user"><dt></dt><dd>Similar approach to previous case with \(\boldsymbol{\sin\theta = -1}\),</dd></dl>
<p class="formulaDsp">
\[ R_{01} = -\sin\psi\cos\phi-\cos\psi\sin\phi = -\sin(\phi+\psi) \]
</p>
 <p class="formulaDsp">
\[ R_{02} = -\cos\psi\cos\phi+\sin\psi\sin\phi = -\cos(\phi+\psi) \]
</p>
<p class="formulaDsp">
\[ \phi = \mathrm{atan2}(-R_{01}, -R_{02}) \]
</p>
<p><a href="math_lighting.html" class="next-article-link">Next: Lighting Model </a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="math_analysis.html">Mathematical Analysis</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
